<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="It will take about 5 minutes to finish reading this article. 1. Combination OperationsA combination operation is the synthesis of multiple Observable streams into a single Observable stream. 1.1 start">
<meta property="og:type" content="article">
<meta property="og:title" content="04. RxSwift (4) ———— Advanced Operations">
<meta property="og:url" content="https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/">
<meta property="og:site_name" content="iOS Hunter Notes">
<meta property="og:description" content="It will take about 5 minutes to finish reading this article. 1. Combination OperationsA combination operation is the synthesis of multiple Observable streams into a single Observable stream. 1.1 start">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zitao0206.github.io/assets/ReactiveProgramming/RxSwift/10.jpeg">
<meta property="og:image" content="https://zitao0206.github.io/assets/ReactiveProgramming/RxSwift/11.jpeg">
<meta property="og:image" content="https://zitao0206.github.io/assets/ReactiveProgramming/RxSwift/12.jpeg">
<meta property="og:image" content="https://zitao0206.github.io/assets/ReactiveProgramming/RxSwift/13.jpeg">
<meta property="og:image" content="https://zitao0206.github.io/assets/ReactiveProgramming/RxSwift/13.jpeg">
<meta property="article:published_time" content="2023-09-22T16:00:00.000Z">
<meta property="article:modified_time" content="2023-10-10T21:16:12.633Z">
<meta property="article:author" content="Zitao">
<meta property="article:tag" content="RxSwift">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zitao0206.github.io/assets/ReactiveProgramming/RxSwift/10.jpeg">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>04. RxSwift (4) ———— Advanced Operations</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/categories">Categories</a></li><!--
     --><!--
       --><li><a href="/tags">Tags</a></li><!--
     --><!--
       --><li><a href="/search">Search</a></li><!--
     --><!--
       --><li><a href="/archives">Archives</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/zitao0206">Projects</a></li><!--
     --><!--
       --><li><a href="/about">Others</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2023/09/24/Swift/07.%20Concurrency/05.%20Sendable/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2023/09/22/Reactive%20Programming/00.%20RxSwift/03.%20RxSwift%20(3)/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&text=04. RxSwift (4) ———— Advanced Operations"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&title=04. RxSwift (4) ———— Advanced Operations"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&is_video=false&description=04. RxSwift (4) ———— Advanced Operations"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=04. RxSwift (4) ———— Advanced Operations&body=Check out this article: https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&title=04. RxSwift (4) ———— Advanced Operations"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&title=04. RxSwift (4) ———— Advanced Operations"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&title=04. RxSwift (4) ———— Advanced Operations"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&title=04. RxSwift (4) ———— Advanced Operations"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&name=04. RxSwift (4) ———— Advanced Operations&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&t=04. RxSwift (4) ———— Advanced Operations"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Combination-Operations"><span class="toc-number">1.</span> <span class="toc-text">1. Combination Operations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Transformation-Operations"><span class="toc-number">2.</span> <span class="toc-text">2. Transformation Operations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Filtering-And-Constraint-Operations"><span class="toc-number">3.</span> <span class="toc-text">3. Filtering And Constraint Operations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-Math-Operations"><span class="toc-number">4.</span> <span class="toc-text">4. Math Operations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-Connectable-Operations"><span class="toc-number">5.</span> <span class="toc-text">5. Connectable Operations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-Error-Handling"><span class="toc-number">6.</span> <span class="toc-text">6. Error Handling</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-Debug"><span class="toc-number">7.</span> <span class="toc-text">7.Debug</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Reference"><span class="toc-number">8.</span> <span class="toc-text">Reference</span></a></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        04. RxSwift (4) ———— Advanced Operations
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">Zitao</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-09-22T16:00:00.000Z" class="dt-published" itemprop="datePublished">2023-09-22</time>
        
        (Updated: <time datetime="2023-10-10T21:16:12.633Z" class="dt-updated" itemprop="dateModified">2023-10-10</time>)
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/Reactive-Programming/">Reactive Programming</a> › <a class="category-link" href="/categories/Reactive-Programming/00-RxSwift/">00. RxSwift</a>
    </div>


      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/RxSwift/" rel="tag">RxSwift</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <p><font color=gray size=2><em>It will take about 5 minutes to finish reading this article.</em></font></p>
<h4 id="1-Combination-Operations"><a href="#1-Combination-Operations" class="headerlink" title="1. Combination Operations"></a><font size=3 color=#4169E1>1. Combination Operations</font></h4><p>A combination operation is the synthesis of multiple Observable streams into a single Observable stream.</p>
<p><font size=3 color=#4169E1><strong>1.1 startWith</strong></font>  </p>
<p>It is used to insert a specified initial element before the sequence of elements of the Observable sequence, and then emit the elements of the original Observable sequence in turn. In other words, a specific event message is emitted before the event message is emitted. For example, if you emit events 2 , 3 and then I startWith(1), then 1 will be emitted first, then 2 , 3.</p>
<img src="/assets/ReactiveProgramming/RxSwift/10.jpeg" class="">

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">example15</span>() &#123;</span><br><span class="line">    <span class="type">Observable</span>.of(<span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>)</span><br><span class="line">    .startWith(<span class="string">&quot;1&quot;</span>)</span><br><span class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">    .disposed(by: disposeBag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Result：</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>1.2 merge</strong></font> </p>
<p>Used to merge multiple Observable sequences into a new Observable sequence while maintaining the order in which elements of all original Observable sequences are emitted (corresponding events are emitted according to the timeline).</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">example16</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> subject1 <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line">    <span class="keyword">let</span> subject2 <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="type">Observable</span>.of(subject1, subject2)</span><br><span class="line">    .merge()</span><br><span class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">    .disposed(by: disposeBag)</span><br><span class="line"></span><br><span class="line">    subject1.onNext(<span class="string">&quot;?️&quot;</span>)</span><br><span class="line">    subject1.onNext(<span class="string">&quot;?️&quot;</span>)</span><br><span class="line">    subject2.onNext(<span class="string">&quot;①&quot;</span>)</span><br><span class="line">    subject2.onNext(<span class="string">&quot;②&quot;</span>)</span><br><span class="line">    subject1.onNext(<span class="string">&quot;?&quot;</span>)</span><br><span class="line">    subject2.onNext(<span class="string">&quot;③&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Result:</span></span><br><span class="line"><span class="operator">?️</span></span><br><span class="line"><span class="operator">?️</span></span><br><span class="line">①</span><br><span class="line">②</span><br><span class="line"><span class="operator">?</span></span><br><span class="line">③</span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>1.3 zip</strong></font> </p>
<p>Used to merge the elements of multiple Observable sequences into a new element one by one in order, and emit these new elements in sequence. In other words, the zip operator waits for all participating Observable sequences to emit an element, then merges these elements one-to-one in order into a new element, and then emits the new element.</p>
<p>zip binds up to 8 Observable streams and processes them together. Note that Zip is an event corresponding to an event in another stream.</p>
<img src="/assets/ReactiveProgramming/RxSwift/11.jpeg" class="">

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">example17</span>() &#123;</span><br><span class="line">     <span class="keyword">let</span> stringSubject <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line">     <span class="keyword">let</span> intSubject <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line"></span><br><span class="line">     <span class="type">Observable</span>.zip(stringSubject, intSubject) &#123; stringElement, intElement <span class="keyword">in</span></span><br><span class="line">         <span class="string">&quot;<span class="subst">\(stringElement)</span> <span class="subst">\(intElement)</span>&quot;</span></span><br><span class="line">         &#125;</span><br><span class="line">     .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">     .disposed(by: disposeBag)</span><br><span class="line"></span><br><span class="line">     stringSubject.onNext(<span class="string">&quot;?️&quot;</span>)</span><br><span class="line">     stringSubject.onNext(<span class="string">&quot;?️&quot;</span>)</span><br><span class="line"></span><br><span class="line">     intSubject.onNext(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">     intSubject.onNext(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">     stringSubject.onNext(<span class="string">&quot;?&quot;</span>)</span><br><span class="line">     intSubject.onNext(<span class="number">3</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Compress stringSubject and intSubject together for joint processing</span></span><br><span class="line"><span class="comment">//Results:</span></span><br><span class="line"><span class="operator">?</span> <span class="number">1</span> </span><br><span class="line"><span class="operator">?</span> <span class="number">2</span></span><br><span class="line"><span class="operator">?</span> <span class="number">3</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>1.4 combineLatest</strong></font> </p>
<p>Used to combine the latest elements of multiple Observable sequences into a new tuple, and emit this new tuple when any of the original Observable sequences emits a new element. Note: It binds no more than 8 Observable streams. The difference from Zip is that combineLatest is that the event of one stream corresponds to the latest event of another stream. Both events will be the latest events. You can compare the following figure with that of Zip.</p>
<img src="/assets/ReactiveProgramming/RxSwift/12.jpeg" class="">

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">example18</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> stringSubject <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line">    <span class="keyword">let</span> intSubject <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="type">Observable</span>.combineLatest(stringSubject, intSubject) &#123; stringElement, intElement <span class="keyword">in</span></span><br><span class="line">            <span class="string">&quot;<span class="subst">\(stringElement)</span> <span class="subst">\(intElement)</span>&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">    .disposed(by: disposeBag)</span><br><span class="line"></span><br><span class="line">    stringSubject.onNext(<span class="string">&quot;?️&quot;</span>)</span><br><span class="line">    stringSubject.onNext(<span class="string">&quot;?️&quot;</span>)</span><br><span class="line">    intSubject.onNext(<span class="number">1</span>)</span><br><span class="line">    intSubject.onNext(<span class="number">2</span>)</span><br><span class="line">    stringSubject.onNext(<span class="string">&quot;?&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Results:</span></span><br><span class="line"><span class="operator">?</span> <span class="number">1</span></span><br><span class="line"><span class="operator">?</span> <span class="number">2</span></span><br><span class="line"><span class="operator">?</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>

<h4 id="2-Transformation-Operations"><a href="#2-Transformation-Operations" class="headerlink" title="2. Transformation Operations"></a><font size=3 color=#4169E1>2. Transformation Operations</font></h4><p><font size=3 color=#4169E1><strong>2.1 map</strong></font> </p>
<p>Used to apply a transformation function to each element in an Observable sequence and emit the transformed elements as a new Observable sequence.</p>
<img src="/assets/ReactiveProgramming/RxSwift/13.jpeg" class="">

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">example19</span>() &#123;</span><br><span class="line">     <span class="comment">//Multiply each element by itself</span></span><br><span class="line">     <span class="type">Observable</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">     .map &#123; <span class="variable">$0</span> <span class="operator">*</span> <span class="variable">$0</span> &#125;</span><br><span class="line">     .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">     .disposed(by: disposeBag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Results:</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>2.2 flatMap</strong></font> </p>
<p>Used to map each element in the original Observable sequence into a new Observable sequence, then merge these new Observable sequences into a single Observable sequence, and emit elements sequentially in the order in which they were emitted. flatMap has an unpacking action, please see the code analysis.</p>
<img src="/assets/ReactiveProgramming/RxSwift/13.jpeg" class="">

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Player</span> &#123;</span><br><span class="line">     <span class="keyword">var</span> score: <span class="type">Variable</span>&lt;<span class="type">Int</span>&gt; <span class="comment">//There is a Variable inside</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">example20</span>() &#123;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">let</span> <span class="operator">??</span> <span class="operator">=</span> <span class="type">Player</span>(score: <span class="type">Variable</span>(<span class="number">80</span>))</span><br><span class="line">     <span class="keyword">let</span> <span class="operator">??</span> <span class="operator">=</span> <span class="type">Player</span>(score: <span class="type">Variable</span>(<span class="number">90</span>))</span><br><span class="line">     <span class="keyword">let</span> <span class="operator">?</span> <span class="operator">=</span> <span class="type">Player</span>(score: <span class="type">Variable</span>(<span class="number">550</span>))</span><br><span class="line"></span><br><span class="line">     <span class="keyword">let</span> player <span class="operator">=</span> <span class="type">Variable</span>(<span class="operator">??</span>) <span class="comment">//Convert player to Variable</span></span><br><span class="line"></span><br><span class="line">     player.asObservable() <span class="comment">//Unboxing and converting into a sequence that can be monitored</span></span><br><span class="line">         .flatMap &#123; <span class="variable">$0</span>.score.asObservable() &#125; <span class="comment">// flatMap has an unpacking action. $0 should have been a BehaviorSubject type, but the score was directly accessed. So I guess flatMap performed onNext unpacking on behaviorSubject to get the data.</span></span><br><span class="line">         .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">         .addDisposableTo(disposeBag)</span><br><span class="line"></span><br><span class="line">     <span class="operator">??</span>.score.value <span class="operator">=</span> <span class="number">85</span></span><br><span class="line"></span><br><span class="line">     player.value <span class="operator">=</span> <span class="operator">??</span> <span class="comment">//Changing the value is equivalent to adding another sequence. Both sequences can be received.</span></span><br><span class="line"></span><br><span class="line">     <span class="operator">??</span>.score.value <span class="operator">=</span> <span class="number">95</span></span><br><span class="line">     <span class="operator">??</span>.score.value <span class="operator">=</span> <span class="number">222</span></span><br><span class="line">     player.value <span class="operator">=</span> <span class="operator">?</span></span><br><span class="line"></span><br><span class="line">     <span class="operator">??</span>.score.value <span class="operator">=</span> <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Results:</span></span><br><span class="line"><span class="number">80</span></span><br><span class="line"><span class="number">85</span></span><br><span class="line"><span class="number">90</span></span><br><span class="line"><span class="number">95</span></span><br><span class="line"><span class="number">222</span></span><br><span class="line"><span class="number">550</span></span><br><span class="line"><span class="number">100</span></span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>2.3 flatMapLatest</strong></font></p>
<p>It is used to map the elements in the original Observable sequence into a new Observable sequence, and only emits the elements of the latest mapped Observable, ignoring the old mapped Observable. Change the above example to flatMapLatest and the result is:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">80</span></span><br><span class="line"><span class="number">85</span></span><br><span class="line"><span class="number">90</span></span><br><span class="line"><span class="number">550</span></span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>2.4 scan</strong></font></p>
<p>Used to process the elements of an observable sequence one by one according to the specified accumulation rules and generate a new observable sequence that emits the accumulated results of each step.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">example21</span>() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">Observable</span>.of(<span class="number">10</span>, <span class="number">100</span>, <span class="number">1000</span>)</span><br><span class="line">    .scan(<span class="number">1</span>) &#123; aggregateValue, newValue <span class="keyword">in</span></span><br><span class="line">        aggregateValue <span class="operator">+</span> newValue</span><br><span class="line">    &#125;</span><br><span class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">    .disposed(by: disposeBag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Results:</span></span><br><span class="line"><span class="number">11</span></span><br><span class="line"><span class="number">111</span></span><br><span class="line"><span class="number">1111</span></span><br></pre></td></tr></table></figure>

<h4 id="3-Filtering-And-Constraint-Operations"><a href="#3-Filtering-And-Constraint-Operations" class="headerlink" title="3. Filtering And Constraint Operations"></a><font size=3 color=#4169E1>3. Filtering And Constraint Operations</font></h4><p><font size=3 color=#4169E1><strong>3.1 filter</strong></font></p>
<p>Used to select elements that meet specified conditions from an Observable sequence, and then emit these elements as a new Observable.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">example22</span>() &#123;</span><br><span class="line">    <span class="type">Observable</span>.of(</span><br><span class="line">    <span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>,</span><br><span class="line">    <span class="string">&quot;?&quot;</span>, <span class="string">&quot;?&quot;</span>, <span class="string">&quot;?&quot;</span>,</span><br><span class="line">    <span class="string">&quot;4&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;6&quot;</span>)</span><br><span class="line">    .filter &#123;</span><br><span class="line">        <span class="variable">$0</span> <span class="operator">==</span> <span class="string">&quot;?&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">    .disposed(by: disposeBag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Results:</span></span><br><span class="line"><span class="operator">?</span></span><br><span class="line"><span class="operator">?</span></span><br><span class="line"><span class="operator">?</span></span><br></pre></td></tr></table></figure>


<p><font size=3 color=#4169E1><strong>3.2 distinctUntilChanged</strong></font></p>
<p>It is used to filter out consecutive repeated elements and emit only those elements that are not identical to the previous element. This operation is similar to RAC.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">example23</span>() &#123;</span><br><span class="line">    <span class="type">Observable</span>.of(<span class="string">&quot;?&quot;</span>, <span class="string">&quot;?&quot;</span>, <span class="string">&quot;?&quot;</span>, <span class="string">&quot;?&quot;</span>, <span class="string">&quot;?&quot;</span>, <span class="string">&quot;?&quot;</span>, <span class="string">&quot;?&quot;</span>)</span><br><span class="line">    .distinctUntilChanged()</span><br><span class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">    .disposed(by: disposeBag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Results:</span></span><br><span class="line"><span class="operator">?</span></span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>3.3 elementAt</strong></font></p>
<p>Used to obtain the element at the specified index position from an Observable sequence and emit it as a new Observable. This operator takes an index value as a parameter and returns a new Observable that emits only the element at the specified index in the original sequence and then completes immediately.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">example24</span>() &#123;</span><br><span class="line">    <span class="type">Observable</span>.of(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;6&quot;</span>)</span><br><span class="line">    .element(at:<span class="number">3</span>)</span><br><span class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">    .disposed(by: disposeBag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Results:</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>3.4 single</strong></font></p>
<p>Used to get a single element from an Observable sequence and emit it as a new Observable. This operator is typically used to ensure that the Observable emits only one element, and it will generate an error event if the Observable emits multiple elements or no elements.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">example25</span>() &#123;</span><br><span class="line">     <span class="type">Observable</span>.of(<span class="string">&quot;?&quot;</span>, <span class="string">&quot;?&quot;</span>, <span class="string">&quot;?&quot;</span>, <span class="string">&quot;?&quot;</span>, <span class="string">&quot;?&quot;</span>, <span class="string">&quot;?&quot;</span>)</span><br><span class="line">     .single()</span><br><span class="line">     .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">     .disposed(by: disposeBag)</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Results:</span></span><br><span class="line"><span class="operator">?</span></span><br><span class="line"><span class="type">Unhandled</span> error happened: <span class="type">Sequence</span> contains more than one element. <span class="comment">//Single signal exceeds one</span></span><br></pre></td></tr></table></figure>
<p><font size=3 color=#4169E1><strong>3.5 take</strong></font></p>
<p>Used to take a specified number of elements from an Observable sequence and emit them as a new Observable. This operator accepts an integer parameter, indicating the number of elements to be removed.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">example26</span>() &#123;</span><br><span class="line">    <span class="type">Observable</span>.of(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;6&quot;</span>)</span><br><span class="line">    .take(<span class="number">3</span>)</span><br><span class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">    .disposed(by: disposeBag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Results:</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>3.6 takeLast</strong></font></p>
<p>This operator accepts an integer parameter indicating the number of last elements to be obtained, i.e. it only handles the last few event signals.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">example27</span>() &#123;</span><br><span class="line">    <span class="type">Observable</span>.of(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;6&quot;</span>)</span><br><span class="line">    .takeLast(<span class="number">3</span>)</span><br><span class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">    .disposed(by: disposeBag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Results:</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>3.7 takeWhile</strong></font></p>
<p>Used to obtain elements from an Observable sequence based on a certain condition until the condition is no longer met, and emit these elements as a new Observable. This operator accepts a closure argument that returns a Boolean value indicating whether the condition is met.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">example28</span>() &#123;</span><br><span class="line">    <span class="type">Observable</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">    .take(while: &#123;<span class="variable">$0</span> <span class="operator">&lt;</span> <span class="number">4</span> &#125;)</span><br><span class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">    .disposed(by: disposeBag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Results:</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>3.8 takeUntil</strong></font></p>
<p>Used to get elements from an Observable sequence if the specified conditions are met, and emit the elements as a new Observable until another specified Observable emits elements or completes.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">example29</span>() &#123;</span><br><span class="line">     <span class="keyword">let</span> sourceSequence <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line">     <span class="keyword">let</span> referenceSequence <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"></span><br><span class="line">     sourceSequence</span><br><span class="line">     .take(until:referenceSequence)</span><br><span class="line">     .subscribe &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">     .disposed(by: disposeBag)</span><br><span class="line">     sourceSequence.onNext(<span class="string">&quot;?&quot;</span>)</span><br><span class="line">     sourceSequence.onNext(<span class="string">&quot;?&quot;</span>)</span><br><span class="line">     sourceSequence.onNext(<span class="string">&quot;?&quot;</span>)</span><br><span class="line">     referenceSequence.onNext(<span class="string">&quot;?&quot;</span>) <span class="comment">//Stop receiving messages</span></span><br><span class="line">     sourceSequence.onNext(<span class="string">&quot;?&quot;</span>)</span><br><span class="line">     sourceSequence.onNext(<span class="string">&quot;?&quot;</span>)</span><br><span class="line">     sourceSequence.onNext(<span class="string">&quot;?&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Results:</span></span><br><span class="line">next(<span class="operator">?</span>)</span><br><span class="line">next(<span class="operator">?</span>)</span><br><span class="line">next(<span class="operator">?</span>)</span><br><span class="line">completed</span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>3.9 skip</strong></font></p>
<p>Used to skip a specified number of elements from an Observable sequence and emit the remaining elements as a new Observable.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">example30</span>() &#123;</span><br><span class="line">    <span class="type">Observable</span>.of(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;6&quot;</span>)</span><br><span class="line">    .skip(<span class="number">2</span>)</span><br><span class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">    .disposed(by: disposeBag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Result:</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>3.10 skipWhile</strong></font></p>
<p>Used to skip elements in an Observable sequence if specified conditions are met, and then emit the remaining elements as a new Observable. This operator accepts a closure argument that returns a Boolean value indicating whether the current element should be skipped.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">example31</span>() &#123;</span><br><span class="line">    <span class="type">Observable</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">    .skip(while: &#123; <span class="variable">$0</span> <span class="operator">&lt;</span> <span class="number">4</span> &#125; )</span><br><span class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">    .disposed(by: disposeBag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Result:</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>3.11 skipUntil</strong></font></p>
<p>Used to skip elements in an original Observable before waiting for another Observable to emit elements. Specifically, skipUntil accepts an Observable as a parameter. When this parameter Observable emits elements, skipUntil will start emitting elements in the original Observable.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">example32</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> sourceSequence <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line">    <span class="keyword">let</span> referenceSequence <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"></span><br><span class="line">    sourceSequence</span><br><span class="line">    .skip(until: referenceSequence)</span><br><span class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">    .disposed(by: disposeBag)</span><br><span class="line"></span><br><span class="line">    sourceSequence.onNext(<span class="string">&quot;1&quot;</span>)</span><br><span class="line">    sourceSequence.onNext(<span class="string">&quot;2&quot;</span>)</span><br><span class="line">    sourceSequence.onNext(<span class="string">&quot;3&quot;</span>)</span><br><span class="line"></span><br><span class="line">    referenceSequence.onNext(<span class="string">&quot;4&quot;</span>)</span><br><span class="line"></span><br><span class="line">    sourceSequence.onNext(<span class="string">&quot;5&quot;</span>)</span><br><span class="line">    sourceSequence.onNext(<span class="string">&quot;6&quot;</span>)</span><br><span class="line">    sourceSequence.onNext(<span class="string">&quot;7&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Result:</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">7</span></span><br></pre></td></tr></table></figure>

<h4 id="4-Math-Operations"><a href="#4-Math-Operations" class="headerlink" title="4. Math Operations"></a><font size=3 color=#4169E1>4. Math Operations</font></h4><p><font size=3 color=#4169E1><strong>4.1 toArray</strong></font></p>
<p>It is used to collect all the elements in an Observable sequence into an array and emit the array as a single-element Observable. In other words, it converts a sequence of multiple elements into an array containing all the elements and emits that array.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">example33</span>() &#123;</span><br><span class="line">    <span class="type">Observable</span>.range(start: <span class="number">1</span>, count: <span class="number">10</span>)</span><br><span class="line">    .toArray()</span><br><span class="line">    .subscribe &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">    .disposed(by: disposeBag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Result:</span></span><br><span class="line">success([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>])</span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>4.2 reduce</strong></font></p>
<p>It is used to accumulate (reduce) elements in an Observable sequence according to specified rules, and emit the final result as a new Observable.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">func</span> <span class="title function_">example34</span>() &#123;</span><br><span class="line">    <span class="type">Observable</span>.of(<span class="number">10</span>, <span class="number">100</span>, <span class="number">1000</span>)</span><br><span class="line">    .reduce(<span class="number">1</span>, accumulator: <span class="operator">+</span>)</span><br><span class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;)</span><br><span class="line">    .disposed(by: disposeBag)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Result：</span></span><br><span class="line"><span class="number">1111</span></span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>4.3 Concat</strong></font></p>
<p>concat will combine multiple sequences into one sequence, and the event of the next sequence will not start until the previous sequence emits the completed event.</p>
<p>Before the first sequence is completed, events emitted by the second sequence will be ignored, but the last event emitted by the second sequence before completion will be received.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">example35</span>() &#123;</span><br><span class="line">     <span class="keyword">let</span> subject1 <span class="operator">=</span> <span class="type">BehaviorSubject</span>(value: <span class="string">&quot;?&quot;</span>)</span><br><span class="line">     <span class="keyword">let</span> subject2 <span class="operator">=</span> <span class="type">BehaviorSubject</span>(value: <span class="string">&quot;?&quot;</span>)</span><br><span class="line"></span><br><span class="line">     <span class="keyword">let</span> variable <span class="operator">=</span> <span class="type">Variable</span>(subject1)</span><br><span class="line"></span><br><span class="line">     variable.asObservable()</span><br><span class="line">     .concat()</span><br><span class="line">     .subscribe &#123; <span class="built_in">print</span>(<span class="variable">$0</span>) &#125;</span><br><span class="line">     .disposed(by: disposeBag)</span><br><span class="line"></span><br><span class="line">     subject1.onNext(<span class="string">&quot;?&quot;</span>)</span><br><span class="line">     subject1.onNext(<span class="string">&quot;?&quot;</span>)</span><br><span class="line"></span><br><span class="line">     variable.value <span class="operator">=</span> subject2</span><br><span class="line"></span><br><span class="line">     subject2.onNext(<span class="string">&quot;?&quot;</span>) <span class="comment">//1 will be ignored before completion</span></span><br><span class="line">     subject2.onNext(<span class="string">&quot;teng&quot;</span>) <span class="comment">//1 will be ignored before completion</span></span><br><span class="line">     subject2.onNext(<span class="string">&quot;fei&quot;</span>) <span class="comment">//The last one before 1 is completed will be received</span></span><br><span class="line">     subject1.onCompleted()</span><br><span class="line">     subject2.onNext(<span class="string">&quot;?&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Results:</span></span><br><span class="line">next(<span class="operator">?</span>)</span><br><span class="line">next(<span class="operator">?</span>)</span><br><span class="line">next(<span class="operator">?</span>)</span><br><span class="line">next(fei)</span><br><span class="line">next(<span class="operator">?</span>)</span><br></pre></td></tr></table></figure>

<h4 id="5-Connectable-Operations"><a href="#5-Connectable-Operations" class="headerlink" title="5. Connectable Operations"></a><font size=3 color=#4169E1>5. Connectable Operations</font></h4><p>Connectable Operators are a special class of operators that are used to control situations where multiple observers share the same underlying data source. These operators can convert a normal Observable into a connectable Observable, and then use the connect() method to allow multiple observers to subscribe to this connectable Observable so that they share the same data. Here are some common connectivity operations:</p>
<p><font size=3 color=#4169E1><strong>5.1 publish</strong></font></p>
<p>Convert a normal sequence into a connectable sequence, and a normal Observable into a connectable Observable. It does not start emitting elements immediately, but waits for the connect() method to be called.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> observable <span class="operator">=</span> <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.interval(.seconds(<span class="number">1</span>), scheduler: <span class="type">MainScheduler</span>.instance)</span><br><span class="line">     .take(<span class="number">5</span>)</span><br><span class="line">     .publish() <span class="comment">// Use publish to make the Observable connectable</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// first observer</span></span><br><span class="line">observable</span><br><span class="line">     .subscribe(onNext: &#123; value <span class="keyword">in</span></span><br><span class="line">         <span class="built_in">print</span>(<span class="string">&quot;Observer 1: <span class="subst">\(value)</span>&quot;</span>)</span><br><span class="line">     &#125;)</span><br><span class="line">     .disposed(by: disposeBag)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Connect after some delay</span></span><br><span class="line"><span class="type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="operator">+</span> <span class="number">2</span>) &#123;</span><br><span class="line">     observable.connect() <span class="comment">// Start emitting elements</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// second observer</span></span><br><span class="line"><span class="type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="operator">+</span> <span class="number">4</span>) &#123;</span><br><span class="line">     observable</span><br><span class="line">         .subscribe(onNext: &#123; value <span class="keyword">in</span></span><br><span class="line">             <span class="built_in">print</span>(<span class="string">&quot;Observer 2: <span class="subst">\(value)</span>&quot;</span>)</span><br><span class="line">         &#125;)</span><br><span class="line">         .disposed(by: disposeBag)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>5.2 replay</strong></font></p>
<p>Converts a normal Observable to a connectable Observable and caches the elements it emits so that subsequent observers can obtain previously emitted elements.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> observable <span class="operator">=</span> <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.interval(.seconds(<span class="number">1</span>), scheduler: <span class="type">MainScheduler</span>.instance)</span><br><span class="line">     .take(<span class="number">5</span>)</span><br><span class="line">     .replay(<span class="number">2</span>) <span class="comment">// Use replay to cache the latest 2 elements</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// first observer</span></span><br><span class="line">observable</span><br><span class="line">     .subscribe(onNext: &#123; value <span class="keyword">in</span></span><br><span class="line">         <span class="built_in">print</span>(<span class="string">&quot;Observer 1: <span class="subst">\(value)</span>&quot;</span>)</span><br><span class="line">     &#125;)</span><br><span class="line">     .disposed(by: disposeBag)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Connect after some delay</span></span><br><span class="line"><span class="type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="operator">+</span> <span class="number">2</span>) &#123;</span><br><span class="line">     observable.connect() <span class="comment">// Start emitting elements</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// second observer</span></span><br><span class="line"><span class="type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="operator">+</span> <span class="number">4</span>) &#123;</span><br><span class="line">     observable</span><br><span class="line">         .subscribe(onNext: &#123; value <span class="keyword">in</span></span><br><span class="line">             <span class="built_in">print</span>(<span class="string">&quot;Observer 2: <span class="subst">\(value)</span>&quot;</span>)</span><br><span class="line">         &#125;)</span><br><span class="line">         .disposed(by: disposeBag)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>5.3 multicast</strong></font></p>
<p>Convert a normal Observable to a joinable Observable. Send it through the characteristic subject, such as PublishSubject, or replaySubject, behaviorSubject, etc. Different Subjects will have different results. Use the connect() method to start emitting elements.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> subject <span class="operator">=</span> <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> observable <span class="operator">=</span> <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.interval(.seconds(<span class="number">1</span>), scheduler: <span class="type">MainScheduler</span>.instance)</span><br><span class="line">     .take(<span class="number">5</span>)</span><br><span class="line">     .multicast(subject) <span class="comment">// Use multicast and specify Subject</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// first observer</span></span><br><span class="line">observable</span><br><span class="line">     .subscribe(onNext: &#123; value <span class="keyword">in</span></span><br><span class="line">         <span class="built_in">print</span>(<span class="string">&quot;Observer 1: <span class="subst">\(value)</span>&quot;</span>)</span><br><span class="line">     &#125;)</span><br><span class="line">     .disposed(by: disposeBag)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Connect after some delay</span></span><br><span class="line"><span class="type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="operator">+</span> <span class="number">2</span>) &#123;</span><br><span class="line">     observable.connect() <span class="comment">// Start emitting elements</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// second observer</span></span><br><span class="line"><span class="type">DispatchQueue</span>.main.asyncAfter(deadline: .now() <span class="operator">+</span> <span class="number">4</span>) &#123;</span><br><span class="line">     observable</span><br><span class="line">         .subscribe(onNext: &#123; value <span class="keyword">in</span></span><br><span class="line">             <span class="built_in">print</span>(<span class="string">&quot;Observer 2: <span class="subst">\(value)</span>&quot;</span>)</span><br><span class="line">         &#125;)</span><br><span class="line">         .disposed(by: disposeBag)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-Error-Handling"><a href="#6-Error-Handling" class="headerlink" title="6. Error Handling"></a><font size=3 color=#4169E1>6. Error Handling</font></h4><p><font size=3 color=#4169E1><strong>6.1 catchErrorJustReturn</strong></font></p>
<p>Used to replace the error’s Observable sequence with a predefined default value when an error is encountered, and then continue subscribing to the original Observable. It can be used to handle errors without interrupting the flow of the entire Observable and provide a default value to replace the erroneous element. To put it simply, when encountering an error event, return a default value and end.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> numbers <span class="operator">=</span> <span class="type">Observable</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">numbers</span><br><span class="line">     .map &#123; value -&gt; <span class="type">Int</span> <span class="keyword">in</span></span><br><span class="line">         <span class="keyword">if</span> value <span class="operator">==</span> <span class="number">3</span> &#123;</span><br><span class="line">             <span class="keyword">throw</span> <span class="type">NSError</span>(domain: <span class="string">&quot;CustomErrorDomain&quot;</span>, code: <span class="number">0</span>, userInfo: <span class="literal">nil</span>)</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> value</span><br><span class="line">     &#125;</span><br><span class="line">     .catchErrorJustReturn(<span class="operator">-</span><span class="number">1</span>) <span class="comment">// Emit the default value -1 when an error is encountered</span></span><br><span class="line">     .subscribe(onNext: &#123; element <span class="keyword">in</span></span><br><span class="line">         <span class="built_in">print</span>(<span class="string">&quot;The processed element is: <span class="subst">\(element)</span>&quot;</span>)</span><br><span class="line">     &#125;, onError: &#123; error <span class="keyword">in</span></span><br><span class="line">         <span class="built_in">print</span>(<span class="string">&quot;An error occurred: <span class="subst">\(error)</span>&quot;</span>)</span><br><span class="line">     &#125;)</span><br><span class="line">     .disposed(by: disposeBag)</span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>6.2 catchError</strong></font></p>
<p>Operator for handling errors, which allows you to perform custom error handling logic when an error is encountered, that is, capture the error for processing and return a new Observable to continue subscribing.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> numbers <span class="operator">=</span> <span class="type">Observable</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">numbers</span><br><span class="line">     .map &#123; value -&gt; <span class="type">Int</span> <span class="keyword">in</span></span><br><span class="line">         <span class="keyword">if</span> value <span class="operator">==</span> <span class="number">3</span> &#123;</span><br><span class="line">             <span class="keyword">throw</span> <span class="type">NSError</span>(domain: <span class="string">&quot;CustomErrorDomain&quot;</span>, code: <span class="number">0</span>, userInfo: <span class="literal">nil</span>)</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> value</span><br><span class="line">     &#125;</span><br><span class="line">     .catchError &#123; error <span class="keyword">in</span></span><br><span class="line">         <span class="built_in">print</span>(<span class="string">&quot;Error caught: <span class="subst">\(error)</span>&quot;</span>)</span><br><span class="line">         <span class="keyword">return</span> <span class="type">Observable</span>.of(<span class="operator">-</span><span class="number">1</span>) <span class="comment">// Return a new Observable to continue subscribing</span></span><br><span class="line">     &#125;</span><br><span class="line">     .subscribe(onNext: &#123; element <span class="keyword">in</span></span><br><span class="line">         <span class="built_in">print</span>(<span class="string">&quot;The processed element is: <span class="subst">\(element)</span>&quot;</span>)</span><br><span class="line">     &#125;)</span><br><span class="line">     .disposed(by: disposeBag)</span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>6.3 retry</strong></font></p>
<p>Used to try to resubscribe to the original Observable when an error is encountered to continue receiving elements. If an error occurs, the retry operator resubscribes to the original Observable and continues to emit elements until the maximum number of attempts is reached or no more errors occur. Especially commonly used when network requests fail.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> attempts <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> observable <span class="operator">=</span> <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; observer <span class="keyword">in</span></span><br><span class="line">     attempts <span class="operator">+=</span> <span class="number">1</span></span><br><span class="line">     <span class="keyword">if</span> attempts <span class="operator">&lt;</span> <span class="number">4</span> &#123;</span><br><span class="line">         observer.onError(<span class="type">NSError</span>(domain: <span class="string">&quot;CustomErrorDomain&quot;</span>, code: <span class="number">0</span>, userInfo: <span class="literal">nil</span>))</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         observer.onNext(<span class="number">10</span>)</span><br><span class="line">         observer.onCompleted()</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> <span class="type">Disposables</span>.create()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">observable</span><br><span class="line">     .retry(<span class="number">3</span>) <span class="comment">// Retry up to 3 times</span></span><br><span class="line">     .subscribe(</span><br><span class="line">         onNext: &#123; element <span class="keyword">in</span></span><br><span class="line">             <span class="built_in">print</span>(<span class="string">&quot;The received element is: <span class="subst">\(element)</span>&quot;</span>)</span><br><span class="line">         &#125;,</span><br><span class="line">         onError: &#123; error <span class="keyword">in</span></span><br><span class="line">             <span class="built_in">print</span>(<span class="string">&quot;An error occurred: <span class="subst">\(error)</span>&quot;</span>)</span><br><span class="line">         &#125;,</span><br><span class="line">         onCompleted: &#123;</span><br><span class="line">             <span class="built_in">print</span>(<span class="string">&quot;Operation completed&quot;</span>)</span><br><span class="line">         &#125;</span><br><span class="line">     )</span><br><span class="line">     .disposed(by: disposeBag)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="7-Debug"><a href="#7-Debug" class="headerlink" title="7.Debug"></a><font size=3 color=#4169E1>7.Debug</font></h4><p><font size=3 color=#4169E1><strong>7.1 debug</strong></font></p>
<p>Operator for debugging, which allows you to insert debugging information into the Observable stream to track the Observable’s life cycle, element emission and subscription events, etc. Typically used when developing and debugging RxSwift code to better understand the behavior of Observables.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> observable <span class="operator">=</span> <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.create &#123; observer <span class="keyword">in</span></span><br><span class="line">     observer.on(.next(<span class="number">1</span>))</span><br><span class="line">     observer.on(.next(<span class="number">2</span>))</span><br><span class="line">     observer.on(.completed)</span><br><span class="line">     <span class="keyword">return</span> <span class="type">Disposables</span>.create()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">observable</span><br><span class="line">     .debug(<span class="string">&quot;Observable&quot;</span>)</span><br><span class="line">     .subscribe(</span><br><span class="line">         onNext: &#123; element <span class="keyword">in</span></span><br><span class="line">             <span class="built_in">print</span>(<span class="string">&quot;The received element is: <span class="subst">\(element)</span>&quot;</span>)</span><br><span class="line">         &#125;,</span><br><span class="line">         onError: &#123; error <span class="keyword">in</span></span><br><span class="line">             <span class="built_in">print</span>(<span class="string">&quot;An error occurred: <span class="subst">\(error)</span>&quot;</span>)</span><br><span class="line">         &#125;,</span><br><span class="line">         onCompleted: &#123;</span><br><span class="line">             <span class="built_in">print</span>(<span class="string">&quot;Operation completed&quot;</span>)</span><br><span class="line">         &#125;</span><br><span class="line">     )</span><br><span class="line">     .disposed(by: disposeBag)</span><br></pre></td></tr></table></figure>

<p><font size=3 color=#4169E1><strong>7.2 RxSwift.Resources.total</strong></font></p>
<p>Property used to get the current RxSwift resource count. It is used to monitor the number of resources created and released by RxSwift in the current application. These resources include Observable, Disposable, Operators, etc. Resource counts can help you detect potential resource leak issues or unreasonable resource usage.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> disposeBag <span class="operator">=</span> <span class="type">DisposeBag</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create some Observables and Disposables</span></span><br><span class="line"><span class="keyword">let</span> observable <span class="operator">=</span> <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.just(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">let</span> disposable <span class="operator">=</span> observable.subscribe()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get the current RxSwift resource count</span></span><br><span class="line"><span class="keyword">let</span> resourceCount <span class="operator">=</span> <span class="type">RxSwift</span>.<span class="type">Resources</span>.total</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Current RxSwift resource count: <span class="subst">\(resourceCount)</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Remember to release resources to avoid resource leaks</span></span><br><span class="line">disposable.dispose()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get the RxSwift resource count again</span></span><br><span class="line"><span class="keyword">let</span> updatedResourceCount <span class="operator">=</span> <span class="type">RxSwift</span>.<span class="type">Resources</span>.total</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Updated RxSwift resource count: <span class="subst">\(updatedResourceCount)</span>&quot;</span>)</span><br></pre></td></tr></table></figure>


<h4 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a><font size=4 color=gray><em>Reference</em></font></h4><p>[1] <a target="_blank" rel="noopener" href="https://github.com/ReactiveX/RxSwift">https://github.com/ReactiveX/RxSwift</a><br>[2] <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/f4ad780cc7a2">https://www.jianshu.com/p/f4ad780cc7a2</a><br>[3] <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d35a99815806">https://www.jianshu.com/p/d35a99815806</a><br>[4] <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/25939562">https://zhuanlan.zhihu.com/p/25939562</a></p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/categories">Categories</a></li>
        
          <li><a href="/tags">Tags</a></li>
        
          <li><a href="/search">Search</a></li>
        
          <li><a href="/archives">Archives</a></li>
        
          <li><a target="_blank" rel="noopener" href="https://github.com/zitao0206">Projects</a></li>
        
          <li><a href="/about">Others</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Combination-Operations"><span class="toc-number">1.</span> <span class="toc-text">1. Combination Operations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Transformation-Operations"><span class="toc-number">2.</span> <span class="toc-text">2. Transformation Operations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Filtering-And-Constraint-Operations"><span class="toc-number">3.</span> <span class="toc-text">3. Filtering And Constraint Operations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-Math-Operations"><span class="toc-number">4.</span> <span class="toc-text">4. Math Operations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-Connectable-Operations"><span class="toc-number">5.</span> <span class="toc-text">5. Connectable Operations</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-Error-Handling"><span class="toc-number">6.</span> <span class="toc-text">6. Error Handling</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-Debug"><span class="toc-number">7.</span> <span class="toc-text">7.Debug</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Reference"><span class="toc-number">8.</span> <span class="toc-text">Reference</span></a></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&text=04. RxSwift (4) ———— Advanced Operations"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&title=04. RxSwift (4) ———— Advanced Operations"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&is_video=false&description=04. RxSwift (4) ———— Advanced Operations"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=04. RxSwift (4) ———— Advanced Operations&body=Check out this article: https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&title=04. RxSwift (4) ———— Advanced Operations"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&title=04. RxSwift (4) ———— Advanced Operations"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&title=04. RxSwift (4) ———— Advanced Operations"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&title=04. RxSwift (4) ———— Advanced Operations"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&name=04. RxSwift (4) ———— Advanced Operations&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://zitao0206.github.io/2023/09/22/Reactive%20Programming/00.%20RxSwift/04.%20RxSwift%20(4)/&t=04. RxSwift (4) ———— Advanced Operations"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2023-2033
    Zitao
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/categories">Categories</a></li><!--
     --><!--
       --><li><a href="/tags">Tags</a></li><!--
     --><!--
       --><li><a href="/search">Search</a></li><!--
     --><!--
       --><li><a href="/archives">Archives</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/zitao0206">Projects</a></li><!--
     --><!--
       --><li><a href="/about">Others</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->


 
  <link
    rel="preload"
    href="/lib/font-awesome/css/all.min.css"
    as="style"
    onload="this.onload=null;this.rel='stylesheet'"
  />
  <noscript
    ><link
      rel="stylesheet"
      href="/lib/font-awesome/css/all.min.css"
  /></noscript>


    <!-- jquery -->

  
<script src="/lib/jquery/jquery.min.js"></script>





<!-- clipboard -->

  
    
<script src="/lib/clipboard/clipboard.min.js"></script>

  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
