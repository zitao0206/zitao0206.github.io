<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="It will take about 5 minutes to finish reading this article. Essentially, no matter which caching method is used, it will eventually be stored on the disk in the form of a file, but the upper layer pe">
<meta property="og:type" content="article">
<meta property="og:title" content="02. Summary of Local Data Persistence Solutions">
<meta property="og:url" content="https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&%20Performance%20&%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/">
<meta property="og:site_name" content="iOS Hunter Notes">
<meta property="og:description" content="It will take about 5 minutes to finish reading this article. Essentially, no matter which caching method is used, it will eventually be stored on the disk in the form of a file, but the upper layer pe">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-11-14T13:30:00.000Z">
<meta property="article:modified_time" content="2023-11-14T21:23:09.424Z">
<meta property="article:author" content="Zitao">
<meta property="article:tag" content="Data Persistence">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>02. Summary of Local Data Persistence Solutions</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/categories">Categories</a></li><!--
     --><!--
       --><li><a href="/tags">Tags</a></li><!--
     --><!--
       --><li><a href="/search">Search</a></li><!--
     --><!--
       --><li><a href="/archives">Archives</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/zitao0206">Projects</a></li><!--
     --><!--
       --><li><a href="/about">Others</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2023/11/16/iOS/04.%20Tools%20&%20Configurations/00.%20Common%20Git%20Commands/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2023/11/13/iOS/00.%20Tips/01.%20The%20ways%20to%20extend%20a%20class%20in%20Objective-C/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&text=02. Summary of Local Data Persistence Solutions"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&title=02. Summary of Local Data Persistence Solutions"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&is_video=false&description=02. Summary of Local Data Persistence Solutions"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=02. Summary of Local Data Persistence Solutions&body=Check out this article: https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&title=02. Summary of Local Data Persistence Solutions"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&title=02. Summary of Local Data Persistence Solutions"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&title=02. Summary of Local Data Persistence Solutions"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&title=02. Summary of Local Data Persistence Solutions"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&name=02. Summary of Local Data Persistence Solutions&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&t=02. Summary of Local Data Persistence Solutions"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-UserDefaults"><span class="toc-number">1.</span> <span class="toc-text"> 1. UserDefaults </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-File-Cache"><span class="toc-number">2.</span> <span class="toc-text"> 2. File Cache </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Keychain"><span class="toc-number">3.</span> <span class="toc-text"> 3. Keychain </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-Core-Data"><span class="toc-number">4.</span> <span class="toc-text"> 4. Core Data </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-Database-SQLite"><span class="toc-number">5.</span> <span class="toc-text"> 5. Database (SQLite) </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-Summary"><span class="toc-number">6.</span> <span class="toc-text"> 6. Summary </span></a></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        02. Summary of Local Data Persistence Solutions
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">Zitao</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-11-14T13:30:00.000Z" class="dt-published" itemprop="datePublished">2023-11-14</time>
        
        (Updated: <time datetime="2023-11-14T21:23:09.424Z" class="dt-updated" itemprop="dateModified">2023-11-14</time>)
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/iOS/">iOS</a> › <a class="category-link" href="/categories/iOS/01-Memory-Performance-Stability/">01. Memory & Performance & Stability</a>
    </div>


      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/Data-Persistence/" rel="tag">Data Persistence</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <p><font color=gray size=2><em>It will take about 5 minutes to finish reading this article.</em></font></p>
<p>Essentially, no matter which caching method is used, it will eventually be stored on the disk in the form of a file, but the upper layer performs some kind of “encapsulation” or “abstraction”, so it is still classified. Currently, iOS local persistent Cache has the following forms:</p>
<p><strong>1. UserDefaults</strong><br><strong>2. File Cache</strong><br><strong>3. Keychain</strong><br><strong>4. Core Data</strong><br><strong>5. Database (SQLite)</strong>    </p>
<p>Note: What is discussed here is only the persistent cache. If we simply discuss the cache, strictly speaking, memory caches such as NSCache, NSURLCache, etc. should also be taken into consideration. Below we will introduce these caching mechanisms from the aspects of principles, sample code, precautions, etc.</p>
<h4 id="1-UserDefaults"><a href="#1-UserDefaults" class="headerlink" title=" 1. UserDefaults "></a><font size=5 color=#4169E1> 1. UserDefaults </font></h4><p>UserDefaults is a common lightweight caching mechanism in iOS. It can be used to store application configuration information, user preferences, temporary cache data, etc.</p>
<p><strong>Principle description:</strong></p>
<p>UserDefaults uses plist files for storage, which saves cached data in the file in the form of key-value. This file is stored in the Library&#x2F;Preferences directory in the application sandbox and is automatically managed by the system.</p>
<p><strong>Sample Code:</strong></p>
<p>UserDefaults is a singleton object and we can access it through its shared instance. Here is a sample code that uses UserDefaults to store and read:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Storing data</span></span><br><span class="line"><span class="type">UserDefaults</span>.standard.set(<span class="string">&quot;hello&quot;</span>, forKey: <span class="string">&quot;greeting&quot;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment">// read data</span></span><br><span class="line"><span class="keyword">let</span> greeting <span class="operator">=</span> <span class="type">UserDefaults</span>.standard.string(forKey: <span class="string">&quot;greeting&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(greeting)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Notice:</strong></p>
<p>UserDefaults can only store basic data types and some object types in the Foundation framework, such as NSString, NSNumber, NSArray, NSDictionary, etc., and does not support storing custom object types.</p>
<p>Since the stored data of UserDefaults is saved through plist files, for data that needs to be written frequently, it is best to use a more efficient storage method, such as Core Data, SQLite, etc.</p>
<p>When using UserDefaults to store sensitive data, encryption is required to ensure data security.</p>
<p><strong>Summarize:</strong></p>
<p>UserDefaults is a common lightweight caching mechanism in iOS. It uses plist files for storage and supports the storage of basic data types and some object types in the Foundation framework. It is easy to use and simple, but you need to pay attention to the limitations of stored data types and data security. question.</p>
<h4 id="2-File-Cache"><a href="#2-File-Cache" class="headerlink" title=" 2. File Cache "></a><font size=5 color=#4169E1> 2. File Cache </font></h4><p>The file caching mechanism is also a common caching method.</p>
<p><strong>Principle Description:</strong></p>
<p>It is a method of permanently saving an application’s data in the local file system so that the data can be read quickly the next time the application is launched. This caching mechanism works by saving data to the application’s sandbox directory and reading that data the next time the application starts.</p>
<p><strong>Sample Code:</strong></p>
<p>Using the file persistence caching mechanism requires the use of the file system API in iOS, such as NSFileManager and NSFileHandle classes. These classes provide basic operations on the file system, such as creating, deleting, moving, and reading and writing files.</p>
<p>The following is a sample code using the file persistence caching mechanism:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Get the application&#x27;s sandbox directory</span></span><br><span class="line"><span class="keyword">let</span> documentsDirectory <span class="operator">=</span> <span class="type">FileManager</span>.default.urls(for: .documentDirectory, in: .userDomainMask).first<span class="operator">!</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//Set the data to be saved</span></span><br><span class="line"><span class="keyword">let</span> data <span class="operator">=</span> <span class="string">&quot;Hello, world!&quot;</span>.data(using: .utf8)</span><br><span class="line"> </span><br><span class="line"><span class="comment">//Save data to file</span></span><br><span class="line"><span class="keyword">let</span> fileURL <span class="operator">=</span> documentsDirectory.appendingPathComponent(<span class="string">&quot;cache.txt&quot;</span>)</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">     <span class="keyword">try</span> data<span class="operator">?</span>.write(to: fileURL)</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">     <span class="built_in">print</span>(<span class="string">&quot;Error writing to file: <span class="subst">\(error)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//Read data from file</span></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">     <span class="keyword">let</span> cachedData <span class="operator">=</span> <span class="keyword">try</span> <span class="type">Data</span>(contentsOf: fileURL)</span><br><span class="line">     <span class="keyword">let</span> cachedString <span class="operator">=</span> <span class="type">String</span>(data: cachedData, encoding: .utf8)</span><br><span class="line">     <span class="built_in">print</span>(<span class="string">&quot;Cached string: <span class="subst">\(cachedString)</span>&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">     <span class="built_in">print</span>(<span class="string">&quot;Error reading from file: <span class="subst">\(error)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Notice:</strong></p>
<p>When using the file persistence cache mechanism, you need to pay attention to the following points:</p>
<ol>
<li><p>You should try to avoid saving large amounts of data to the local file system, as this takes up storage space on the device.</p>
</li>
<li><p>For sensitive data, encryption algorithms should be used to protect the security of the data.</p>
</li>
<li><p>Cache files should be cleared regularly to avoid excessive cache files causing insufficient storage space on the device.</p>
</li>
<li><p>Care should be taken to handle errors when reading and writing files to avoid program crashes or data loss.</p>
</li>
</ol>
<p>In addition, there is a special but commonly used method of file caching, which is KeyedArchiver.</p>
<p><strong>KeyedArchiver</strong></p>
<p>Used to serialize objects into binary data and write them to files for caching. KeyedArchiver provides a convenient way for developers to serialize custom objects into binary data and save it to the file system for later reading from the file.</p>
<p>Here’s how to use KeyedArchiver:</p>
<ol>
<li>Implement NSCoding protocol</li>
</ol>
<p>First, the NSCoding protocol needs to be implemented in the custom object so that KeyedArchiver can serialize the object into binary data. The protocol includes two methods, encode and init(coder:), which are used to serialize objects into binary data and deserialize binary data into objects respectively.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>: <span class="title class_">NSObject</span>, <span class="title class_">NSCoding</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">init</span>(<span class="params">name</span>: <span class="type">String</span>, <span class="params">age</span>: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.age <span class="operator">=</span> age</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">encode</span>(<span class="params">with</span> <span class="params">coder</span>: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        coder.encode(name, forKey: <span class="string">&quot;name&quot;</span>)</span><br><span class="line">        coder.encode(age, forKey: <span class="string">&quot;age&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init?</span>(<span class="params">coder</span>: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        name <span class="operator">=</span> coder.decodeObject(forKey: <span class="string">&quot;name&quot;</span>) <span class="keyword">as?</span> <span class="type">String</span> <span class="operator">??</span> <span class="string">&quot;&quot;</span></span><br><span class="line">        age <span class="operator">=</span> coder.decodeInteger(forKey: <span class="string">&quot;age&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>Cache objects</li>
</ol>
<p>Next, use KeyedArchiver to serialize the custom object into binary data and write it to a file for caching.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person <span class="operator">=</span> <span class="type">Person</span>(name: <span class="string">&quot;Tom&quot;</span>, age: <span class="number">20</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment">// Get file path</span></span><br><span class="line"><span class="keyword">let</span> path <span class="operator">=</span> <span class="type">NSSearchPathForDirectoriesInDomains</span>(.documentDirectory, .userDomainMask, <span class="literal">true</span>)[<span class="number">0</span>] <span class="keyword">as</span> <span class="type">String</span></span><br><span class="line"><span class="keyword">let</span> filePath <span class="operator">=</span> path <span class="operator">+</span> <span class="string">&quot;/person.archive&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// Serialize the object into binary data and write it to the file</span></span><br><span class="line"><span class="keyword">let</span> data <span class="operator">=</span> <span class="type">NSKeyedArchiver</span>.archivedData(withRootObject: person)</span><br><span class="line"><span class="keyword">try?</span> data.write(to: <span class="type">URL</span>(fileURLWithPath: filePath))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>Read object from cache</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Read binary data from file and deserialize into object</span></span><br><span class="line"><span class="keyword">let</span> data <span class="operator">=</span> <span class="keyword">try?</span> <span class="type">Data</span>(contentsOf: <span class="type">URL</span>(fileURLWithPath: filePath))</span><br><span class="line"><span class="keyword">let</span> cachedPerson <span class="operator">=</span> <span class="type">NSKeyedUnarchiver</span>.unarchiveObject(with: data<span class="operator">!</span>) <span class="keyword">as?</span> <span class="type">Person</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Name: <span class="subst">\(cachedPerson<span class="operator">?</span>.name <span class="operator">??</span> <span class="string">&quot;&quot;</span>)</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Age: <span class="subst">\(cachedPerson<span class="operator">?</span>.age <span class="operator">??</span> <span class="number">0</span>)</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>You need to pay attention to the following points when using KeyedArchiver:</p>
<p>(1) Implement the encode and init(coder:) methods in the NSCoding protocol for custom objects so that KeyedArchiver can serialize objects into binary data.</p>
<p>(2) KeyedArchiver will serialize objects into binary data, so you need to pay attention to memory consumption issues.</p>
<p>(3) For some sensitive data, data security needs to be considered. Encryption algorithms can be used to protect data security.</p>
<p>(4) Pay attention to errors when handling file reading and writing to avoid program crashes or data loss.</p>
<h4 id="3-Keychain"><a href="#3-Keychain" class="headerlink" title=" 3. Keychain "></a><font size=5 color=#4169E1> 3. Keychain </font></h4><p>Keychain is a persistent caching mechanism for iOS and part of the security framework in iOS, providing an API for storing and retrieving data in a secure manner.</p>
<p><strong>Principle Description:</strong></p>
<p>Data in Keychain is stored in a protected system area, which is completely isolated and data cannot be shared between different applications. Each application has its own Keychain, which can only access its own data and not other applications’ data. This isolation ensures the security of Keychain storage.</p>
<p>It guarantees secure storage and retrieval of sensitive data between application launch and device restart. It stores data such as passwords, encryption keys, and other credentials in an encrypted manner so that it cannot be accessed by other applications and systems.</p>
<p>For every application, KeyChain has two access areas, private area and public area. The private area is a Sandbox. Any data stored by this program is not visible to other programs, and other applications cannot access the data in this area. Using the Keychain API, data can be stored through key-value pairs and identified using service names and account names. This ensures that the data is associated with the application and can only be used by applications with the corresponding service name and account name. access.</p>
<p>If you want to place the stored content in the public area so that multiple applications can jointly access some data, you can first declare the name of the public area. The official document calls this name “keychain access group”.</p>
<p><strong>Usage Example:</strong></p>
<p>The following is how to use Keychain and sample code (Swift):</p>
<ol>
<li>Import the Security framework</li>
</ol>
<p>Before using Keychain, you need to import the Security framework.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Security</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>Storing data</li>
</ol>
<p>Use the SecItemAdd method to store data into the Keychain.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> password <span class="operator">=</span> <span class="string">&quot;123456&quot;</span></span><br><span class="line"><span class="keyword">let</span> data <span class="operator">=</span> password.data(using: .utf8)<span class="operator">!</span></span><br><span class="line"><span class="keyword">let</span> query: [<span class="type">String</span>: <span class="keyword">Any</span>] <span class="operator">=</span> [kSecClass <span class="keyword">as</span> <span class="type">String</span>: kSecClassGenericPassword,</span><br><span class="line">                            kSecAttrAccount <span class="keyword">as</span> <span class="type">String</span>: <span class="string">&quot;MyPassword&quot;</span>,</span><br><span class="line">                            kSecValueData <span class="keyword">as</span> <span class="type">String</span>: data]</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> status <span class="operator">=</span> <span class="type">SecItemAdd</span>(query <span class="keyword">as</span> <span class="type">CFDictionary</span>, <span class="literal">nil</span>)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> status <span class="operator">==</span> errSecSuccess &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Password saved to Keychain.&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Failed to save password to Keychain.&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In the above code, we convert the string password into binary data and store it into Keychain. kSecClass represents the stored data type, kSecAttrAccount is the name used to identify the stored data, and kSecValueData is the stored binary data.</p>
<ol start="3">
<li>Read data</li>
</ol>
<p>Use the SecItemCopyMatching method to read data from the Keychain.</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> query: [<span class="type">String</span>: <span class="keyword">Any</span>] <span class="operator">=</span> [kSecClass <span class="keyword">as</span> <span class="type">String</span>: kSecClassGenericPassword,</span><br><span class="line">                            kSecAttrAccount <span class="keyword">as</span> <span class="type">String</span>: <span class="string">&quot;MyPassword&quot;</span>,</span><br><span class="line">                            kSecReturnData <span class="keyword">as</span> <span class="type">String</span>: kCFBooleanTrue<span class="operator">!</span>,</span><br><span class="line">                            kSecMatchLimit <span class="keyword">as</span> <span class="type">String</span>: kSecMatchLimitOne]</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> dataTypeRef: <span class="type">AnyObject</span>?</span><br><span class="line"><span class="keyword">let</span> status <span class="operator">=</span> <span class="type">SecItemCopyMatching</span>(query <span class="keyword">as</span> <span class="type">CFDictionary</span>, <span class="operator">&amp;</span>dataTypeRef)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> status <span class="operator">==</span> errSecSuccess &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> retrievedData <span class="operator">=</span> dataTypeRef <span class="keyword">as?</span> <span class="type">Data</span>,</span><br><span class="line">        <span class="keyword">let</span> password <span class="operator">=</span> <span class="type">String</span>(data: retrievedData, encoding: .utf8) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Retrieved password from Keychain: <span class="subst">\(password)</span>&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Failed to retrieve password from Keychain.&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Failed to retrieve password from Keychain.&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In the above code, we use kSecReturnData to represent the returned stored binary data, and kSecMatchLimit to represent the amount of returned data. Here we only need to return one result, so we specify kSecMatchLimitOne.</p>
<p><strong>Notice:</strong></p>
<p>You need to pay attention to the following points when using Keychain:</p>
<p>(1) Access to the Keychain should be restricted and ensure that only authorized users can access the data in the Keychain.</p>
<p>(2) The data stored in Keychain are encrypted, so they cannot be accessed from the outside. If the data needs to be shared with other applications, you can use the group method to allow the program to be shared between apps, but the TeamID must be the same.</p>
<p>(3) The data in the Keychain is not stored in the Sandbox of the App. Even if the App is deleted, the data is still stored in the Keychain. If you reinstall the app, you can also get data from the keychain.</p>
<p>(4) Keychain is a secure storage mechanism, but it is not perfect. For example, a jailbroken device can access data stored in Keychain. Therefore, highly sensitive data should not be stored in Keychain. So sensitive information still needs to be used and stored with caution.</p>
<p>(5) When handling Keychain, attention should be paid to handling possible errors to avoid program crash or data loss.</p>
<p>Apple also provides a wealth of development documentation for keychain, including Keychain Services Programming Guide: the article includes keychain development using mac and ios.</p>
<h4 id="4-Core-Data"><a href="#4-Core-Data" class="headerlink" title=" 4. Core Data "></a><font size=5 color=#4169E1> 4. Core Data </font></h4><p>Core Data is a data management framework provided by Apple that provides a convenient way to manage and manipulate data in applications. The most important feature is persistent storage, which stores data in local files so that it can be used the next time the application starts.</p>
<p><strong>Principle Description:</strong></p>
<p>In Core Data, persistent storage is implemented using a SQLite database. SQLite is a lightweight embedded database that can be easily embedded into applications, providing an efficient and reliable way to store data.</p>
<p><strong>Usage example:</strong></p>
<p>Using Core Data for persistent storage requires the following steps:</p>
<p>(1) Define the data model: Create a data model file in Xcode to define the entities, attributes, relationships, etc. of the data.</p>
<p>(2) Create Core Data stack: Use the NSPersistentContainer class to create the Core Data stack, including managed object context, persistent storage coordinator and other components.</p>
<p>(3) Store and read data: Use the NSManagedObjectContext class to operate the managed object context, and store and read data by operating elements such as entities and attributes.</p>
<p>Here is a simple Swift code example that demonstrates how to use Core Data for data storage:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create Core Data stack</span></span><br><span class="line"><span class="keyword">let</span> container <span class="operator">=</span> <span class="type">NSPersistentContainer</span>(name: <span class="string">&quot;DataModel&quot;</span>)</span><br><span class="line">container.loadPersistentStores &#123; <span class="keyword">_</span>, error <span class="keyword">in</span></span><br><span class="line">     <span class="keyword">if</span> <span class="keyword">let</span> error <span class="operator">=</span> error &#123;</span><br><span class="line">         <span class="built_in">print</span>(<span class="string">&quot;Failed to load persistent stores: <span class="subst">\(error)</span>&quot;</span>)</span><br><span class="line">         <span class="keyword">return</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//Create a managed object context</span></span><br><span class="line"><span class="keyword">let</span> context <span class="operator">=</span> container.viewContext</span><br><span class="line"> </span><br><span class="line"><span class="comment">//Create a Person entity object</span></span><br><span class="line"><span class="keyword">let</span> person <span class="operator">=</span> <span class="type">NSEntityDescription</span>.insertNewObject(forEntityName: <span class="string">&quot;Person&quot;</span>, into: context) <span class="keyword">as!</span> <span class="type">Person</span></span><br><span class="line">person.name <span class="operator">=</span> <span class="string">&quot;Tom&quot;</span></span><br><span class="line">person.age <span class="operator">=</span> <span class="number">30</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//Save data to persistent storage</span></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">     <span class="keyword">try</span> context.save()</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">     <span class="built_in">print</span>(<span class="string">&quot;Failed to save context: <span class="subst">\(error)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//Read data from persistent storage</span></span><br><span class="line"><span class="keyword">let</span> fetchRequest: <span class="type">NSFetchRequest</span>&lt;<span class="type">Person</span>&gt; <span class="operator">=</span> <span class="type">Person</span>.fetchRequest()</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">     <span class="keyword">let</span> persons <span class="operator">=</span> <span class="keyword">try</span> context.fetch(fetchRequest)</span><br><span class="line">     <span class="keyword">for</span> person <span class="keyword">in</span> persons &#123;</span><br><span class="line">         <span class="built_in">print</span>(<span class="string">&quot;Name: <span class="subst">\(person.name<span class="operator">!</span>)</span>, Age: <span class="subst">\(person.age)</span>&quot;</span>)</span><br><span class="line">     &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">     <span class="built_in">print</span>(<span class="string">&quot;Failed to fetch persons: <span class="subst">\(error)</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>When using Core Data for persistent storage, you need to pay attention to the following points:</p>
<p>(1) When defining your data model, you should keep it as simple as possible. A complex data model can cause database operations to slow down and increase code complexity.</p>
<p>(2) Core Data provides a variety of persistent storage methods, such as SQLite, binary files, XML files, etc. Developers need to choose the appropriate storage method based on specific needs.</p>
<p>(3) Core Data is a thread-safe framework, but multi-threaded programming still requires attention to thread safety issues. It is recommended to create a separate managed object context in each thread.</p>
<p>In short, Core Data is a powerful persistent storage in iOS.</p>
<h4 id="5-Database-SQLite"><a href="#5-Database-SQLite" class="headerlink" title=" 5. Database (SQLite) "></a><font size=5 color=#4169E1> 5. Database (SQLite) </font></h4><p>In iOS, SQLite is a lightweight database engine that is widely used for persistent storage. SQLite uses files as data storage media to store and read data by encoding and decoding data. In iOS, SQLite is used to develop native applications to store large amounts of structured data.</p>
<p><strong>Principle Description</strong></p>
<p>SQLite is a disk-based relational database that supports SQL language operations. SQLite stores all data in a single file that can be easily copied, backed up, and transferred. SQLite is characterized by occupying very little memory and being fast, making it suitable for resource-constrained environments such as mobile devices.</p>
<p><strong>Usage example:</strong></p>
<p>Using SQLite persistent cache requires the following steps:</p>
<p>(1) Import the SQLite library: Import the SQLite library into the project, you can use CocoaPods or import it manually.</p>
<p>(2) Create database: Create database files through the API provided by the SQLite library. If the database file already exists, you can open it directly, otherwise you can use SQL statements to create the database file.</p>
<p>(3) Create a table: Use SQL statements to create a table and define field types and constraints for the table.</p>
<p>(4) Execute SQL statements: Execute SQL statements through the API provided by SQLite, and perform add, delete, modify and query operations on the table.</p>
<p>(5) Close the database: When the application exits or no longer uses the database, the database needs to be closed and resources released.</p>
<p><strong>Sample code</strong></p>
<p>Here is an example code for using SQLite for data storage, using Swift’s SQLite.swift library:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Import SQLite.swift library</span></span><br><span class="line"><span class="keyword">import</span> SQLite</span><br><span class="line"> </span><br><span class="line"><span class="comment">//Open database connection</span></span><br><span class="line"><span class="keyword">let</span> db <span class="operator">=</span> <span class="keyword">try!</span> <span class="type">Connection</span>(<span class="string">&quot;path/to/database.sqlite3&quot;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment">//Define data table</span></span><br><span class="line"><span class="keyword">let</span> users <span class="operator">=</span> <span class="type">Table</span>(<span class="string">&quot;users&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> id <span class="operator">=</span> <span class="type">Expression</span>&lt;<span class="type">Int64</span>&gt;(<span class="string">&quot;id&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> name <span class="operator">=</span> <span class="type">Expression</span>&lt;<span class="type">String</span>&gt;(<span class="string">&quot;name&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> email <span class="operator">=</span> <span class="type">Expression</span>&lt;<span class="type">String</span>&gt;(<span class="string">&quot;email&quot;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment">//Create table</span></span><br><span class="line"><span class="keyword">try</span><span class="operator">!</span>db.run(users.create &#123; t <span class="keyword">in</span></span><br><span class="line">     t.column(id, primaryKey: <span class="literal">true</span>)</span><br><span class="line">     t.column(name)</span><br><span class="line">     t.column(email, unique: <span class="literal">true</span>)</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="comment">//Insert data</span></span><br><span class="line"><span class="keyword">let</span> insert <span class="operator">=</span> users.insert(name <span class="operator">&lt;-</span> <span class="string">&quot;Alice&quot;</span>, email <span class="operator">&lt;-</span> <span class="string">&quot;alice@example.com&quot;</span>)</span><br><span class="line"><span class="keyword">try</span><span class="operator">!</span>db.run(insert)</span><br><span class="line"> </span><br><span class="line"><span class="comment">// Query data</span></span><br><span class="line"><span class="keyword">for</span> user <span class="keyword">in</span> <span class="keyword">try!</span> db.prepare(users) &#123;</span><br><span class="line">     <span class="built_in">print</span>(<span class="string">&quot;id: <span class="subst">\(user[id])</span>, name: <span class="subst">\(user[name])</span>, email: <span class="subst">\(user[email])</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// update data</span></span><br><span class="line"><span class="keyword">let</span> alice <span class="operator">=</span> users.filter(name <span class="operator">==</span> <span class="string">&quot;Alice&quot;</span>)</span><br><span class="line"><span class="keyword">try!</span> db.run(alice.update(email <span class="operator">&lt;-</span> <span class="string">&quot;alice@example.org&quot;</span>))</span><br><span class="line"> </span><br><span class="line"><span class="comment">// delete data</span></span><br><span class="line"><span class="keyword">try!</span> db.run(alice.delete())</span><br><span class="line"> </span><br><span class="line"><span class="comment">//Close database connection</span></span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>

<p><strong>Notice:</strong></p>
<p>When using SQLite persistent cache, you need to pay attention to the following things:</p>
<p>(1) It is necessary to manually write SQL statements to perform data operations, which may be difficult for developers who are not familiar with the SQL language.</p>
<p>(2) Thread safety needs to be ensured when performing data operations. You can use the transaction mechanism provided by SQLite to perform data operations to avoid data damage or loss.</p>
<p>(3) SQLite database files can be easily copied, backed up and transferred, but data security issues need to be paid attention to.</p>
<h4 id="6-Summary"><a href="#6-Summary" class="headerlink" title=" 6. Summary "></a><font size=5 color=#4169E1> 6. Summary </font></h4><p>After the above introduction, we can summarize it as follows:</p>
<p><strong>UserDefaults</strong></p>
<p>UserDefaults is a lightweight persistent storage method suitable for storing some simple configuration information or user preferences. Its advantage is that it is simple and easy to use, without having to consider issues such as data models and data migration. But its disadvantage is that it can only store some basic data types and cannot support complex data structures.</p>
<p>Best application scenario: Suitable for storing a small amount of simple configuration information or user preferences.</p>
<p><strong>File Caching</strong></p>
<p>File caching can store data in the local file system in the form of files, and is suitable for storing larger data, such as pictures, videos, etc. Its advantage is that it can flexibly control the cache strategy and cache size, which can effectively reduce the server load and improve the user experience. However, its disadvantage is that it requires manual management of cache, including cache path, cache file name, cache expiration time, etc. Improper management may lead to too many cache files and waste storage space.</p>
<p>Best application scenario: Suitable for storing large amounts of non-sensitive data, such as pictures, audio, video (SDWebImage), etc.</p>
<p><strong>Keychain</strong></p>
<p>Keychain is a secure storage method that can encrypt sensitive information (such as user passwords, keys, etc.) and store it in the system to ensure data security. Its advantage is that it can protect sensitive information from being maliciously obtained, and it also provides a convenient API to manage this sensitive information. But its disadvantage is that it can only store smaller data and is not suitable for storing large amounts of data.</p>
<p>Best application scenario: Suitable for storing sensitive information, such as user passwords, keys, etc.</p>
<p><strong>Core Data</strong></p>
<p>Core Data is an ORM (Object Relational Mapping) framework that can store data in a SQLite database. Its advantage is that it can easily manage data models, while providing powerful query, sorting, filtering and other functions, which is very suitable for storing complex data structures. However, its disadvantage is that the learning curve is steep, and you need to understand some concepts and APIs of Core Data. You also need to consider issues such as the migration of data models.</p>
<p>Best application scenario: Suitable for storing complex data structures, such as contacts, music playlists, calendar events, etc.</p>
<p><strong>Database (SQLite)</strong></p>
<p>Database is a universal storage method that can store any type of data. It also provides rich query, sorting, filtering and other functions. But generally, we prefer to use it in scenarios that require complex storage and query. Such as contacts, music playlists, etc.</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/categories">Categories</a></li>
        
          <li><a href="/tags">Tags</a></li>
        
          <li><a href="/search">Search</a></li>
        
          <li><a href="/archives">Archives</a></li>
        
          <li><a target="_blank" rel="noopener" href="https://github.com/zitao0206">Projects</a></li>
        
          <li><a href="/about">Others</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-UserDefaults"><span class="toc-number">1.</span> <span class="toc-text"> 1. UserDefaults </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-File-Cache"><span class="toc-number">2.</span> <span class="toc-text"> 2. File Cache </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Keychain"><span class="toc-number">3.</span> <span class="toc-text"> 3. Keychain </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-Core-Data"><span class="toc-number">4.</span> <span class="toc-text"> 4. Core Data </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-Database-SQLite"><span class="toc-number">5.</span> <span class="toc-text"> 5. Database (SQLite) </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-Summary"><span class="toc-number">6.</span> <span class="toc-text"> 6. Summary </span></a></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&text=02. Summary of Local Data Persistence Solutions"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&title=02. Summary of Local Data Persistence Solutions"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&is_video=false&description=02. Summary of Local Data Persistence Solutions"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=02. Summary of Local Data Persistence Solutions&body=Check out this article: https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&title=02. Summary of Local Data Persistence Solutions"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&title=02. Summary of Local Data Persistence Solutions"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&title=02. Summary of Local Data Persistence Solutions"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&title=02. Summary of Local Data Persistence Solutions"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&name=02. Summary of Local Data Persistence Solutions&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://zitao0206.github.io/2023/11/14/iOS/01.%20Memory%20&amp;%20Performance%20&amp;%20Stability/02.%20Summary%20of%20Local%20Data%20Persistence%20Solutions/&t=02. Summary of Local Data Persistence Solutions"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2023-2033
    Zitao
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/categories">Categories</a></li><!--
     --><!--
       --><li><a href="/tags">Tags</a></li><!--
     --><!--
       --><li><a href="/search">Search</a></li><!--
     --><!--
       --><li><a href="/archives">Archives</a></li><!--
     --><!--
       --><li><a target="_blank" rel="noopener" href="https://github.com/zitao0206">Projects</a></li><!--
     --><!--
       --><li><a href="/about">Others</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->


 
  <link
    rel="preload"
    href="/lib/font-awesome/css/all.min.css"
    as="style"
    onload="this.onload=null;this.rel='stylesheet'"
  />
  <noscript
    ><link
      rel="stylesheet"
      href="/lib/font-awesome/css/all.min.css"
  /></noscript>


    <!-- jquery -->

  
<script src="/lib/jquery/jquery.min.js"></script>





<!-- clipboard -->

  
    
<script src="/lib/clipboard/clipboard.min.js"></script>

  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
